var GMW_Admin={init:function(){jQuery().chosen&&jQuery(".gmw-admin-page select").chosen({width:"100%"}),GMW_Admin.tabs_switcher_init(),jQuery("#gmw-edit-form-page").length&&GMW_Admin.form_editor_init()},tabs_switcher_init:function(){jQuery(".gmw-nav-tab").click(function(e){e.preventDefault(),jQuery(".gmw-tab-panel").hide(),jQuery(".gmw-nav-tab").removeClass("active"),jQuery(this).addClass("active"),clickedTab=jQuery(this).data("name"),jQuery(".gmw-tab-panel."+clickedTab).show(),GMW.set_cookie("gmw_admin_tab",clickedTab,1)}),lastTab=GMW.get_cookie("gmw_admin_tab"),"undefined"!=lastTab&&jQuery("#"+lastTab).length?jQuery(".gmw-tabs-wrapper").find('a[data-name="'+lastTab+'"]').click():jQuery(".gmw-tabs-wrapper li a:first").click()},form_editor_init:function(){jQuery(".form-editor-close").click(function(){GMW.set_cookie("gmw_admin_tab","",1)}),jQuery("#gmw-edit-form-page .post-types-tax").click(function(){var e=jQuery(this).closest(".posts-checkboxes-wrapper").find(":checkbox:checked");1==e.length?(e=e.attr("id"),jQuery("#post-types-no-taxonomies-message").slideUp(),jQuery("#post-type-"+e+"-taxonomies-wrapper").slideDown("fast")):(jQuery(".post-type-taxonomies-wrapper").slideUp(),jQuery("#post-types-no-taxonomies-message").slideDown("fast"))}),jQuery(".gmw-edit-form").on("submit",function(e){jQuery(this).data("ajax_enabled")&&(e.preventDefault(),GMW_Admin.update_form(jQuery(this)))})},update_form:function(e){jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!0),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery.ajax({type:"POST",url:gmwAjaxUrl,dataType:"json",data:{action:"gmw_update_admin_form",form_values:e.serialize(),security:e.data("nonce")},success:function(e){e?(jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!1),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery(".gmw-edit-form #form-update-messages p.success").fadeToggle(function(){setTimeout(function(){jQuery(".gmw-edit-form #form-update-messages p.success").fadeToggle()},5e3)})):this.update_failed()}}).fail(function(e,t,i){window.console&&window.console.log&&(console.log(t+": "+i),e.responseText&&console.log(e.responseText)),jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!1),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery(".gmw-edit-form #form-update-messages p.failed").fadeToggle(function(){setTimeout(function(){jQuery(".gmw-edit-form #form-update-messages p.failed").fadeToggle()},5e3)})})}};jQuery(document).ready(function(e){GMW_Admin.init(e)});