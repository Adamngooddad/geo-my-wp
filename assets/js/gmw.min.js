function gmwSetCookie(a,c,h){var k=new Date;k.setTime(k.getTime()+864E5*h);c=escape(encodeURIComponent(c))+(null==h?"":"; expires="+k.toUTCString());document.cookie=a+"="+c+"; path=/"}function gmwGetCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?decodeURIComponent(a[2]):null}function gmwDeleteCookie(a){document.cookie=encodeURIComponent(a)+"=deleted; expires="+(new Date(0)).toUTCString()}
function GmwAutoLocator(a,c){function h(l){(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(l.coords.latitude,l.coords.longitude)},function(b,e){if(e==google.maps.GeocoderStatus.OK)return g={status:"success",results:b},a(g);g={status:"falied",type:"2",message:e};return c(g)})}function k(a){var b;switch(a.code){case a.PERMISSION_DENIED:b="User denied the request for Geolocation.";break;case a.POSITION_UNAVAILABLE:b="Location information is unavailable.";break;case 3:b="The request to get user location timed out.";
break;case a.UNKNOWN_ERROR:b="An unknown error occurred"}g={status:"failed",type:"3",message:b};return c(g)}var g=!1;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(h,k,{timeout:1E4});else return g={status:"failed",type:"1",message:"Sorry! Geolocation is not supported by this browser."},c(g)}function gmwAddressGeocoder(a,c,h){geocoder=new google.maps.Geocoder;geocoder.geocode({address:a.address,region:a.region},function(a,g){return g==google.maps.GeocoderStatus.OK?c(a):h(g)})}
jQuery(document).ready(function(a){function c(a){k(a.results)}function h(b){2==b.type?alert("Geocoder failed due to: "+b.message):alert(b.message);0!=l&&a("#gmw-locator-btn-loader-"+l).fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted");a(".gmw-address").removeAttr("disabled");a(".gmw-submit").removeAttr("disabled")})}function k(b){var e="",f="",c="",h="",k="",m="",d=b[0].address_components,n=b[0].geometry.location.lat(),p=b[0].geometry.location.lng();
gmwSetCookie("gmw_lat",n,7);gmwSetCookie("gmw_lng",p,7);gmwSetCookie("gmw_address",b[0].formatted_address,7);for(x in d)"street_number"==d[x].types&&(e=d[x].long_name,gmwSetCookie("gmw_street_number",e,7)),"route"==d[x].types&&(street_name=d[x].long_name,gmwSetCookie("gmw_street_name",street_name,7),f=0!=e&&""!=e?e+" "+street_name:street_name,gmwSetCookie("gmw_street",f,7)),"administrative_area_level_1,political"==d[x].types&&(h=d[x].short_name,gmwSetCookie("gmw_state",d[x].short_name,7),gmwSetCookie("gmw_state_long",
d[x].long_name,7)),"locality,political"==d[x].types&&(c=d[x].short_name,gmwSetCookie("gmw_city",d[x].short_name,7)),"postal_code"==d[x].types&&(k=d[x].short_name,gmwSetCookie("gmw_zipcode",d[x].short_name,7)),"country,political"==d[x].types&&(m=d[x].short_name,gmwSetCookie("gmw_country",d[x].short_name,7),gmwSetCookie("gmw_country_long",d[x].long_name,7));1==g&&location.reload();a(".locator-submitted")[0]&&(gForm=a(".locator-submitted").closest("form"),a(".gmw-address").removeAttr("disabled"),a(".gmw-submit").removeAttr("disabled"),
gForm.find(".gmw-address").hasClass("gmw-full-address")?gForm.find(".gmw-full-address").val(b[0].formatted_address):(gForm.find(".gmw-saf-street").val(f),gForm.find(".gmw-saf-city").val(c),gForm.find(".gmw-saf-state").val(h),gForm.find(".gmw-saf-zipcode").val(k),gForm.find(".gmw-saf-country").val(m)),gForm.find(".gmw-submit").toggleClass("submitted"),gForm.find(".gmw-lat").val(n),gForm.find(".gmw-lng").val(p),a("#"+l).hasClass("gmw-locator-submit")?setTimeout(function(){a(".gmw-locator-btn-loader-"+
l).fadeToggle("fast",function(){locatorButton.fadeToggle("fast")});gForm.find(".gmw-submit").click()},1500):a("#gmw-locator-btn-loader-"+l).fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted")}))}a(".gmw-map-loader").fadeOut(1500);navigator.geolocation||a(".gmw-locator-btn-wrapper").hide();a(".gmw-address").focus(function(){a(this).hasClass("gmw-no-address-error")&&a(this).removeClass("gmw-no-address-error")});a(".gmw-submit").click(function(b){a(b.target).is("input")||
a(this).closest("form").submit()});a(".gmw-form input[type='text']").keyup(function(b){13==b.keyCode&&a(this).closest("form").submit()});a(".gmw-form").submit(function(b){var e,f=a(this);f.find(".gmw-paged").val("1");f.find(".gmw-address").hasClass("gmw-full-address")?e=f.find(".gmw-full-address").val():(e=[],f.find(".gmw-address").each(function(){e.push(a(this).val())}),e=e.join(" "));if(!a.trim(e).length){var c=f.find(".gmw-address");if(c.hasClass("mandatory"))return c.hasClass("gmw-no-address-error")||
c.toggleClass("gmw-no-address-error"),!1;f.find(".gmw-submit").addClass("submitted")}if(1==gmwSettings.general_settings.js_geocode){if(f.find(".prev-address").val()==e&&0<a.trim(f.find(".gmw-lat").val()).length||f.find(".gmw-submit").hasClass("submitted"))return!0;b.preventDefault();geocoder=new google.maps.Geocoder;countryCode=gmwSettings.general_settings.country_code;geocoder.geocode({address:e,region:countryCode},function(a,b){b==google.maps.GeocoderStatus.OK?(f.find(".gmw-submit").addClass("submitted"),
f.find(".gmw-lat").val(a[0].geometry.location.lat()),f.find(".gmw-lng").val(a[0].geometry.location.lng()),setTimeout(function(){f.submit()},500)):alert("We could not find the address you entered for the following reason: "+b)})}else return!0});var g=!1,l=!1;1==gmwSettings.general_settings.auto_locate&&1!=gmwGetCookie("gmw_autolocate")&&(gmwSetCookie("gmw_autolocate",1,1),g=!0,GmwAutoLocator(c,h));a(".gmw-locate-btn").click(function(){l=a(this).attr("id");locatorButton=a(this);a(this).toggleClass("locator-submitted");
locatorButton.fadeToggle("fast",function(){a("#gmw-locator-btn-loader-"+l).fadeToggle("fast",function(){a(".gmw-address").attr("disabled","disabled");a(".gmw-submit").attr("disabled","disabled");GmwAutoLocator(c,h)})})})});