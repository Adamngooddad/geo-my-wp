var GMW={options:gmwSettings,hooks:{action:{},filter:{}},map_elements:{},navigator_timeout:1e4,autocomplete_fields:void 0!==typeof gmwAutocompleteFields?{}:gmwAutocompleteFields,navigator_error_messages:{1:"User denied the request for Geolocation.",2:"Location information is unavailable.",3:"The request to get user location timed out.",4:"An unknown error occurred"},auto_locator:{status:!1,type:!1,callback:!1},form_locator:{status:!1,button:!1,id:!1,loader:!1,submit:!1},form_submission:{status:!1,form:!1,id:!1,submit:!1},init:function(){jQuery(".gmw-map-loader").fadeOut(1500),jQuery(".gmw-form-wrapper").length&&GMW.form_functions(),navigator.geolocation&&1==GMW.options.general_settings.auto_locate&&1!=GMW.get_cookie("gmw_autolocate")&&(GMW.set_cookie("gmw_autolocate",1,1),GMW.auto_locator("page_locator",GMW.page_locator_success,!1)),jQuery(".gmw-address-autocomplete").each(function(){jQuery(this).is("[id]")&&GMW.address_autocomplete(jQuery(this).attr("id"),{})})},add_action:function(o,e,t,a){GMW.add_hook("action",o,e,t,a)},add_filter:function(o,e,t,a){GMW.add_hook("filter",o,e,t,a)},do_action:function(o){GMW.do_hook("action",o,arguments)},apply_filters:function(o){return GMW.do_hook("filter",o,arguments)},remove_action:function(o,e){GMW.remove_hook("action",o,e)},remove_filter:function(o,e,t){GMW.remove_hook("filter",o,e,t)},add_hook:function(o,e,t,a,r){void 0==GMW.hooks[o][e]&&(GMW.hooks[o][e]=[]);var s=GMW.hooks[o][e];void 0==r&&(r=e+"_"+s.length),void 0==a&&(a=10),GMW.hooks[o][e].push({tag:r,callable:t,priority:a})},do_hook:function(o,e,t){if(t=Array.prototype.slice.call(t,1),void 0!=GMW.hooks[o][e]){var a,r=GMW.hooks[o][e];r.sort(function(o,e){return o.priority-e.priority});for(var s=0;s<r.length;s++)a=r[s].callable,"function"!=typeof a&&(a=window[a]),"action"==o?a.apply(null,t):t[0]=a.apply(null,t)}return"filter"==o?t[0]:void 0},remove_hook:function(o,e,t,a){if(void 0!=GMW.hooks[o][e])for(var r=GMW.hooks[o][e],s=r.length-1;s>=0;s--)void 0!=a&&a!=r[s].tag||void 0!=t&&t!=r[s].priority||r.splice(s,1)},set_cookie:function(o,e,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var r=escape(encodeURIComponent(e))+(null==t?"":"; expires="+a.toUTCString());document.cookie=o+"="+r+"; path=/"},get_cookie:function(o){var e=document.cookie.match("(^|;) ?"+o+"=([^;]*)(;|$)");return e?decodeURIComponent(e[2]):null},delete_cookie:function(o){document.cookie=encodeURIComponent(name_name)+"=deleted; expires="+new Date(0).toUTCString()},navigator:function(o,e){function t(t){GMW.geocoder([t.coords.latitude,t.coords.longitude],o,e)}function a(o){return e(GMW.navigator_error_messages[o.code])}return navigator.geolocation?void navigator.geolocation.getCurrentPosition(t,a,{timeout:GMW.navigator_timeout}):e("Sorry! Geolocation is not supported by this browser.")},geocoder:function(o,e,t){countryCode=void 0!=GMW.options.general_settings.country_code?GMW.options.general_settings.country_code:"us","object"==typeof o?data={latLng:new google.maps.LatLng(o[0],o[1]),region:countryCode}:data={address:o,region:countryCode},geocoder=new google.maps.Geocoder,geocoder.geocode(data,function(o,a){return a==google.maps.GeocoderStatus.OK?void 0!=e?e(o):GMW.geocoder_success(o):void 0!=t?t(a):GMW.geocoder_failed(a)})},geocoder_success:function(){},geocoder_failed:function(o){alert("We could not find the address you entered for the following reason: "+o)},address_autocomplete:function(o,e){var t=document.getElementById(o);if(null!=t){if("undefined"==typeof e)var e={};e=GMW.apply_filters("gmw_address_autocomplete_options",e,o,t,GMW);var a=new google.maps.places.Autocomplete(t,e);google.maps.event.addListener(a,"place_changed",function(){var r=a.getPlace();GMW.do_action("gmw_address_autocomplete_place_changed",r,a,o,t,e),r.geometry&&jQuery("#"+o).closest("form").hasClass("gmw-form")&&(jQuery("#"+o).closest("form").find(".gmw-lat").val(r.geometry.location.lat().toFixed(6)),jQuery("#"+o).closest("form").find(".gmw-lng").val(r.geometry.location.lng().toFixed(6)))})}},save_location_fields:function(o){latitude=o[0].geometry.location.lat().toFixed(6),longitude=o[0].geometry.location.lng().toFixed(6),address_fields={street_number:"",street_name:"",street:"",premise:"",neighborhood:"",city:"",region_code:"",region_name:"",country:"",postcode:"",country_code:"",country_name:"",address:o[0].formatted_address,formatted_address:o[0].formatted_address,lat:latitude,lng:longitude},GMW.set_cookie("gmw_ul_lat",latitude,7),jQuery("#gmw_cl_lat").val(latitude),GMW.set_cookie("gmw_ul_lng",longitude,7),jQuery("#gmw_cl_lng").val(longitude),GMW.set_cookie("gmw_ul_address",o[0].formatted_address,7),jQuery("#gmw_cl_address").val(o[0].formatted_address),GMW.set_cookie("gmw_ul_formatted_address",o[0].formatted_address,7),jQuery("#gmw_cl_formatted_address").val(o[0].formatted_address),address=o[0].address_components,GMW.do_action("gmw_save_location_fields",o);for(x in address)"street_number"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_number=address[x].long_name,jQuery("#gmw_cl_street_number").val(address_fields.street_number)),"route"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_name=address[x].long_name,jQuery("#gmw_cl_street_name").val(address_fields.street_name),""!=address_fields.street_number?address_fields.street=address_fields.street_number+" "+address_fields.street_name:address_fields.street=address_fields.street_name,GMW.set_cookie("gmw_ul_street",address_fields.street,7),jQuery("#gmw_cl_street").val(address_fields.street)),"subpremise"==address[x].types&&void 0!=address[x].long_name&&(address_fields.premise=address[x].long_name,jQuery("#gmw_cl_premise").val(address[x].long_name)),"neighborhood,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.neighborhood=address[x].long_name,jQuery("#gmw_cl_neighborhood").val(address[x].long_name)),"locality,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.city=address[x].long_name,GMW.set_cookie("gmw_ul_city",address[x].long_name,7),jQuery("#gmw_cl_city").val(address[x].long_name)),"administrative_area_level_1,political"==address[x].types&&(address_fields.region_name=address[x].long_name,address_fields.region_code=address[x].short_name,GMW.set_cookie("gmw_ul_region_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_region_code",address[x].short_name,7),jQuery("#gmw_cl_region_code").val(address[x].short_name),jQuery("#gmw_cl_region_name").val(address[x].long_name)),"administrative_area_level_2,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.county=address[x].long_name,jQuery("#gmw_cl_county").val(address[x].long_name)),"postal_code"==address[x].types&&void 0!=address[x].long_name&&(address_fields.postcode=address[x].long_name,GMW.set_cookie("gmw_ul_postcode",address[x].short_name,7),jQuery("#gmw_cl_postcode").val(address[x].long_name)),"country,political"==address[x].types&&(address_fields.country_name=address[x].long_name,address_fields.country_code=address[x].short_name,GMW.set_cookie("gmw_ul_country_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_country_code",address[x].short_name,7),jQuery("#gmw_cl_country_code").val(address[x].short_name),jQuery("#gmw_cl_country_name").val(address[x].long_name)),GMW.do_action("gmw_save_location_field",address[x],o);return address_fields},auto_locator:function(o,e,t){GMW.auto_locator.status=!0,GMW.auto_locator.type=o,GMW.auto_locator.success=e,GMW.auto_locator.failed=t,GMW.navigator(GMW.auto_locator_success,GMW.auto_locator_failed)},auto_locator_success:function(o){address_fields=GMW.save_location_fields(o),0!=GMW.auto_locator.success?GMW.auto_locator.success(address_fields,o):(GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},auto_locator_failed:function(o){0!=GMW.auto_locator.failed?GMW.auto_locator.failed(o):(alert(o),GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},page_locator_success:function(o,e){GMW.auto_locator.status=!1,GMW.auto_locator.callback=!1,GMW.auto_locator.type=!1,setTimeout(function(){jQuery("#gmw-current-location-form").submit()},500)},form_functions:function(){jQuery().chosen&&jQuery(".gmw-chosen").chosen(),navigator.geolocation||jQuery(".gmw-locator-btn-wrapper").hide(),jQuery(".gmw-address").focus(function(){jQuery(this).removeClass("gmw-no-address-error")}),jQuery(".gmw-address").keyup(function(){jQuery(this).closest("form").find(".gmw-lat").val(""),jQuery(this).closest("form").find(".gmw-lng").val("")}),jQuery(".gmw-per-page").change(function(){thisValue=jQuery(this).val(),ppData=jQuery(this).data(),totalResults=ppData.total_results,lastPage=Math.ceil(totalResults/thisValue),newPaged=ppData.paged>lastPage||1==lastPage?lastPage:ppData.paged,0==ppData.gmw_post?window.location.href=window.location.href+"?"+ppData.url_px+"auto=auto&"+ppData.url_px+"per_page="+thisValue+"&"+ppData.url_px+"form="+ppData.form_id+"&"+ppData.page_name+"="+newPaged:window.location.href=location.href.replace(ppData.url_px+"per_page="+ppData.per_page,ppData.url_px+"per_page="+thisValue).replace("&"+ppData.page_name+"="+ppData.paged,"&"+ppData.page_name+"="+newPaged)+"&"+ppData.page_name+"="+newPaged}),jQuery(".gmw-locate-btn").click(function(){GMW.form_locator(jQuery(this))}),jQuery('.gmw-form input[type="text"]').keyup(function(o){13==o.keyCode&&GMW.form_submission(jQuery(this).closest("form"),o)}),jQuery(".gmw-form").submit(function(o){GMW.form_submission(jQuery(this),o)})},form_submission:function(o,e){if(GMW.form_submission.status=!0,GMW.form_submission.form=o,GMW.form_submission.id=GMW.form_submission.form.find(".gmw-form-id").val(),1==GMW.form_submission.submit)return!0;if(e.preventDefault(),jQuery(".gmw-paged-"+GMW.form_submission.id).val("1"),GMW.form_submission.form.find(".gmw-address").hasClass("gmw-full-address")?address=jQuery("#gmw-address-"+GMW.form_submission.id).val():(address=[],GMW.form_submission.form.find(".gmw-address").each(function(){address.push(jQuery(this).val())}),address=address.join(" ")),!jQuery.trim(address).length){var t=GMW.form_submission.form.find(".gmw-address");return t.hasClass("mandatory")?(t.hasClass("gmw-no-address-error")||t.toggleClass("gmw-no-address-error"),!1):(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1)}return 1!=GMW.options.general_settings.js_geocode?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):""!=jQuery("#gmw-lat-"+GMW.form_submission.id).val()&&""!=jQuery("#gmw-lng-"+GMW.form_submission.id).val()?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):void GMW.geocoder(address,GMW.form_geocoder_success,GMW.geocoder_failed)},form_geocoder_success:function(o){return jQuery("#gmw-lat-"+GMW.form_submission.id).val(o[0].geometry.location.lat().toFixed(6)),jQuery("#gmw-lng-"+GMW.form_submission.id).val(o[0].geometry.location.lng().toFixed(6)),setTimeout(function(){GMW.form_submission.submit=!0,GMW.form_submission.form.submit()},500),!1},form_locator:function(o){GMW.form_locator.status=!0,GMW.form_locator.button=o,GMW.form_locator.id=o.attr("data-form_id"),GMW.form_locator.loader=jQuery("#gmw-locate-loader-"+GMW.form_locator.id),GMW.form_locator.submit=1==o.attr("data-locator_submit")?!0:!1,jQuery("#gmw-lat-"+GMW.form_locator.id).val(""),jQuery("#gmw-lng-"+GMW.form_locator.id).val(""),GMW.form_locator.button.fadeOut("fast",function(){GMW.form_locator.loader.fadeIn("fast",function(){jQuery('.gmw-form input[type="text"]').attr("disabled","disabled"),jQuery(".gmw-submit").attr("disabled","disabled"),GMW.auto_locator("form_locator",GMW.form_locator_success,GMW.form_locator_failed)})})},form_locator_success:function(o,e){jQuery('.gmw-form input[type="text"]').removeAttr("disabled"),jQuery(".gmw-submit").removeAttr("disabled"),jQuery("#gmw-lat-"+GMW.form_locator.id).val(e[0].geometry.location.lat().toFixed(6)),jQuery("#gmw-lng-"+GMW.form_locator.id).val(e[0].geometry.location.lng().toFixed(6)),jQuery("#gmw-address-"+GMW.form_locator.id).hasClass("gmw-full-address")?jQuery("#gmw-address-"+GMW.form_locator.id).val(o.formatted_address):(jQuery("#gmw-form-"+ +GMW.form_locator.id).find(".gmw-saf-street").val(o.street),jQuery("#gmw-form-"+ +GMW.form_locator.id).find(".gmw-saf-city").val(o.city),jQuery("#gmw-form-"+ +GMW.form_locator.id).find(".gmw-saf-state").val(o.region_name),jQuery("#gmw-form-"+ +GMW.form_locator.id).find(".gmw-saf-zipcode").val(o.postcode),jQuery("#gmw-form-"+ +GMW.form_locator.id).find(".gmw-saf-country").val(o.country_code)),GMW.form_locator.submit?setTimeout(function(){jQuery("#gmw-submit-"+GMW.form_locator.id).click()},1500):GMW.form_locator_done()},form_locator_failed:function(o){alert("Geocoder failed due to: "+o),GMW.form_locator_done()},form_locator_done:function(){GMW.form_locator.loader.fadeOut("fast",function(){GMW.form_locator.button.fadeIn("fast"),jQuery('.gmw-form input[type="text"]').removeAttr("disabled"),jQuery(".gmw-submit").removeAttr("disabled"),GMW.form_locator.status=!1,GMW.form_locator.button=!1,GMW.form_locator.id=!1,GMW.form_locator.loader=!1,GMW.form_locator.submit=!1})}};jQuery(document).ready(function(o){GMW.init()});